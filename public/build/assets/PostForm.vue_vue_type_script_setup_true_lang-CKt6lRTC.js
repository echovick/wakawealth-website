import{d as P,z as S,q as B,C as F,c as u,A as G,g as _,b as r,u as e,F as y,f as x,t as n,a as l,w as i,i as p,s as E,D as N,m as a,j as D}from"./app-BRhn5tmR.js";import{_ as L}from"./index-DzB3QnRS.js";import{_ as b}from"./Input.vue_vue_type_script_setup_true_lang-G6WR0LTD.js";import{_ as g}from"./Label.vue_vue_type_script_setup_true_lang-CxOsSwl_.js";import{_ as V,a as k,b as h,c as $,d as v}from"./SelectValue.vue_vue_type_script_setup_true_lang-CkGIh97J.js";import{_ as j}from"./FieldRenderer.vue_vue_type_script_setup_true_lang-C732yAZK.js";const q={key:0,class:"rounded-lg border border-red-500 bg-red-50 dark:bg-red-900/20 p-4"},A={class:"list-disc list-inside space-y-1 text-sm text-red-600 dark:text-red-300"},O={class:"mt-3"},R={class:"mt-2 text-xs bg-red-100 dark:bg-red-900/40 p-2 rounded overflow-auto"},z={class:"grid gap-6 md:grid-cols-3"},M={class:"md:col-span-2 space-y-6"},H={class:"space-y-2"},I={key:0,class:"text-sm text-destructive"},J={class:"space-y-2"},K={key:0,class:"text-sm text-destructive"},Q={class:"space-y-2"},W={key:0,class:"text-sm text-destructive"},X={class:"font-semibold"},Y={class:"space-y-6"},Z={class:"rounded-lg border p-6 space-y-4"},ee={class:"space-y-2"},te={class:"flex items-center space-x-2"},se={class:"rounded-lg border p-6 space-y-4"},oe={key:0,class:"text-sm text-destructive"},re={class:"rounded-lg border p-6 space-y-4"},le={class:"space-y-2"},de=["id","checked","onChange"],fe=P({__name:"PostForm",props:{post:{},postTypes:{},categories:{},fieldGroups:{default:()=>[]},fieldGroupsByPostType:{default:()=>({})},posts:{default:()=>[]},fieldTypes:{default:()=>({})}},setup(f){const d=f,s=S({post_type_id:d.post?.post_type_id||(d.postTypes[0]?.id??null),title:d.post?.title||"",slug:d.post?.slug||"",image:d.post?.image||"",content:d.post?.content&&!Array.isArray(d.post.content)?d.post.content:{},status:d.post?.published_at?"published":"draft",is_featured:d.post?.is_featured||!1,categories:d.post?.categories?.map(c=>c.id)||[]}),w=B(()=>d.post&&d.fieldGroups&&d.fieldGroups.length>0?d.fieldGroups:s.post_type_id&&d.fieldGroupsByPostType?d.fieldGroupsByPostType[s.post_type_id]||[]:[]);F(()=>s.title,c=>{d.post||(s.slug=c.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""))});const U=()=>{d.post?s.put(`/cms/posts/${d.post.id}`):s.post("/cms/posts")},C=(c,t)=>{const o=s.categories.indexOf(c);t&&o===-1?s.categories.push(c):!t&&o>-1&&s.categories.splice(o,1)};return(c,t)=>(a(),u("form",{onSubmit:G(U,["prevent"]),class:"space-y-8"},[Object.keys(e(s).errors).length>0?(a(),u("div",q,[t[7]||(t[7]=r("h3",{class:"font-semibold text-red-700 dark:text-red-400 mb-2"},"Validation Errors:",-1)),r("ul",A,[(a(!0),u(y,null,x(e(s).errors,(o,m)=>(a(),u("li",{key:m},[r("strong",null,n(m)+":",1),p(" "+n(o),1)]))),128))]),r("details",O,[t[6]||(t[6]=r("summary",{class:"cursor-pointer text-sm text-red-600 dark:text-red-300"},"Show Raw Errors",-1)),r("pre",R,n(e(s).errors),1)])])):_("",!0),r("div",z,[r("div",M,[r("div",H,[l(e(g),{for:"title"},{default:i(()=>[...t[8]||(t[8]=[p("Title",-1)])]),_:1}),l(e(b),{id:"title",modelValue:e(s).title,"onUpdate:modelValue":t[0]||(t[0]=o=>e(s).title=o),placeholder:"Enter post title",required:""},null,8,["modelValue"]),e(s).errors.title?(a(),u("p",I,n(e(s).errors.title),1)):_("",!0)]),r("div",J,[l(e(g),{for:"slug"},{default:i(()=>[...t[9]||(t[9]=[p("Slug",-1)])]),_:1}),l(e(b),{id:"slug",modelValue:e(s).slug,"onUpdate:modelValue":t[1]||(t[1]=o=>e(s).slug=o),placeholder:"post-slug",required:""},null,8,["modelValue"]),e(s).errors.slug?(a(),u("p",K,n(e(s).errors.slug),1)):_("",!0)]),r("div",Q,[l(e(g),{for:"image"},{default:i(()=>[...t[10]||(t[10]=[p("Featured Image URL",-1)])]),_:1}),l(e(b),{id:"image",modelValue:e(s).image,"onUpdate:modelValue":t[2]||(t[2]=o=>e(s).image=o),type:"url",placeholder:"https://example.com/image.jpg"},null,8,["modelValue"]),t[11]||(t[11]=r("p",{class:"text-xs text-muted-foreground"}," Optional - Enter the URL of a featured image for this post ",-1)),e(s).errors.image?(a(),u("p",W,n(e(s).errors.image),1)):_("",!0)]),(a(!0),u(y,null,x(w.value,o=>(a(),u("div",{key:o.id,class:"space-y-4 rounded-lg border p-6"},[r("h3",X,n(o.title),1),(a(!0),u(y,null,x(o.fields,m=>(a(),u("div",{key:m.id,class:"space-y-2"},[l(j,{field:m,posts:f.posts,categories:f.categories,"post-types":f.postTypes,"field-types":f.fieldTypes,modelValue:e(s).content[m.name],"onUpdate:modelValue":T=>e(s).content[m.name]=T},null,8,["field","posts","categories","post-types","field-types","modelValue","onUpdate:modelValue"])]))),128))]))),128))]),r("div",Y,[r("div",Z,[t[16]||(t[16]=r("h3",{class:"font-semibold"},"Publish",-1)),r("div",ee,[l(e(g),{for:"status"},{default:i(()=>[...t[12]||(t[12]=[p("Status",-1)])]),_:1}),l(e(V),{modelValue:e(s).status,"onUpdate:modelValue":t[3]||(t[3]=o=>e(s).status=o)},{default:i(()=>[l(e(k),{id:"status"},{default:i(()=>[l(e(h),{placeholder:"Select status"})]),_:1}),l(e($),null,{default:i(()=>[l(e(v),{value:"draft"},{default:i(()=>[...t[13]||(t[13]=[p("Draft",-1)])]),_:1}),l(e(v),{value:"published"},{default:i(()=>[...t[14]||(t[14]=[p("Published",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),r("div",te,[E(r("input",{type:"checkbox",id:"is_featured","onUpdate:modelValue":t[4]||(t[4]=o=>e(s).is_featured=o),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary cursor-pointer"},null,512),[[N,e(s).is_featured]]),l(e(g),{for:"is_featured",class:"text-sm font-normal cursor-pointer"},{default:i(()=>[...t[15]||(t[15]=[p(" Featured Post ",-1)])]),_:1})]),l(e(L),{type:"submit",class:"w-full",disabled:e(s).processing},{default:i(()=>[p(n(f.post?"Update":"Publish"),1)]),_:1},8,["disabled"])]),r("div",se,[t[17]||(t[17]=r("h3",{class:"font-semibold"},"Post Type",-1)),l(e(V),{"model-value":String(e(s).post_type_id),"onUpdate:modelValue":t[5]||(t[5]=o=>e(s).post_type_id=Number(o))},{default:i(()=>[l(e(k),null,{default:i(()=>[l(e(h),{placeholder:"Select post type"})]),_:1}),l(e($),null,{default:i(()=>[(a(!0),u(y,null,x(f.postTypes,o=>(a(),D(e(v),{key:o.id,value:String(o.id)},{default:i(()=>[p(n(o.title),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"]),e(s).errors.post_type_id?(a(),u("p",oe,n(e(s).errors.post_type_id),1)):_("",!0)]),r("div",re,[t[18]||(t[18]=r("h3",{class:"font-semibold"},"Categories",-1)),r("div",le,[(a(!0),u(y,null,x(f.categories,o=>(a(),u("div",{key:o.id,class:"flex items-center space-x-2"},[r("input",{type:"checkbox",id:`category-${o.id}`,checked:e(s).categories.includes(o.id),onChange:m=>C(o.id,m.target.checked),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary cursor-pointer"},null,40,de),l(e(g),{for:`category-${o.id}`,class:"text-sm font-normal cursor-pointer"},{default:i(()=>[p(n(o.name),1)]),_:2},1032,["for"])]))),128))])])])])],32))}});export{fe as _};
