import{d as F,z as T,r as S,c as m,b as a,a as o,w as p,g as c,u as e,t as y,F as _,f as V,A as z,q as N,i as C,k as n}from"./app-BjopekTW.js";import{_ as b}from"./index-CONoCyrD.js";import{_ as k}from"./Input.vue_vue_type_script_setup_true_lang-2KM5bN4e.js";import{_ as v}from"./Label.vue_vue_type_script_setup_true_lang-P6b2ycO5.js";import{_ as h}from"./Textarea.vue_vue_type_script_setup_true_lang-gSUrzkiO.js";import{_ as A}from"./FieldRenderer.vue_vue_type_script_setup_true_lang-C5mb8X7b.js";import{_ as f}from"./InputError.vue_vue_type_script_setup_true_lang-DEGWWcdu.js";import{C as D}from"./SelectValue.vue_vue_type_script_setup_true_lang-C4POXSgU.js";import{C as L}from"./grip-vertical-BWablXvi.js";const M={class:"space-y-4 bg-card p-6 rounded-lg border"},P={class:"space-y-2"},j={class:"space-y-2"},q={class:"text-sm text-muted-foreground"},E={class:"space-y-2"},R={class:"flex items-center justify-between p-6 pb-4"},H={class:"text-lg font-semibold"},I={key:0,class:"px-6 pb-6 space-y-4"},J={class:"flex justify-end gap-2"},te=F({__name:"PageForm",props:{page:{default:()=>({slug:"",title:"",description:null,content:{}})},fieldGroups:{default:()=>[]},posts:{default:()=>[]},categories:{default:()=>[]},postTypes:{default:()=>[]},fieldTypes:{default:()=>({})},submitUrl:{},submitMethod:{default:"post"}},setup(r){const d=r,x=i=>i?Array.isArray(i)?{}:i:{},t=T({slug:d.page?.slug||"",title:d.page?.title||"",description:d.page?.description||"",content:x(d.page?.content)}),g=S({}),U=i=>{g.value[i]=!g.value[i]},$=()=>{t.title&&(t.slug=t.title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""))},w=()=>{d.submitMethod==="put"?t.put(d.submitUrl):t.post(d.submitUrl)};return(i,s)=>(n(),m("form",{onSubmit:z(w,["prevent"]),class:"space-y-6"},[a("div",M,[s[7]||(s[7]=a("h3",{class:"text-lg font-semibold"},"Basic Information",-1)),a("div",P,[o(e(v),{for:"title"},{default:p(()=>[...s[4]||(s[4]=[c("Title",-1)])]),_:1}),o(e(k),{id:"title",modelValue:e(t).title,"onUpdate:modelValue":s[0]||(s[0]=l=>e(t).title=l),type:"text",required:"",onBlur:$},null,8,["modelValue"]),o(f,{message:e(t).errors.title},null,8,["message"])]),a("div",j,[o(e(v),{for:"slug"},{default:p(()=>[...s[5]||(s[5]=[c("Slug",-1)])]),_:1}),o(e(k),{id:"slug",modelValue:e(t).slug,"onUpdate:modelValue":s[1]||(s[1]=l=>e(t).slug=l),type:"text"},null,8,["modelValue"]),a("p",q," URL: /"+y(e(t).slug),1),o(f,{message:e(t).errors.slug},null,8,["message"])]),a("div",E,[o(e(v),{for:"description"},{default:p(()=>[...s[6]||(s[6]=[c("Description",-1)])]),_:1}),o(e(h),{id:"description",modelValue:e(t).description,"onUpdate:modelValue":s[2]||(s[2]=l=>e(t).description=l),rows:"3"},null,8,["modelValue"]),o(f,{message:e(t).errors.description},null,8,["message"])])]),(n(!0),m(_,null,V(r.fieldGroups,l=>(n(),m("div",{key:l.id,class:"bg-card rounded-lg border"},[a("div",R,[a("h3",H,y(l.title),1),o(e(b),{type:"button",variant:"ghost",size:"icon",onClick:u=>U(l.id)},{default:p(()=>[g.value[l.id]?(n(),C(e(D),{key:0,class:"h-5 w-5"})):(n(),C(e(L),{key:1,class:"h-5 w-5"}))]),_:2},1032,["onClick"])]),g.value[l.id]?N("",!0):(n(),m("div",I,[(n(!0),m(_,null,V(l.fields,u=>(n(),m("div",{key:u.id,class:"space-y-2"},[o(A,{field:u,posts:r.posts,categories:r.categories,"post-types":r.postTypes,"field-types":r.fieldTypes,modelValue:e(t).content[u.name],"onUpdate:modelValue":B=>e(t).content[u.name]=B},null,8,["field","posts","categories","post-types","field-types","modelValue","onUpdate:modelValue"]),o(f,{message:e(t).errors[`content.${u.name}`]},null,8,["message"])]))),128))]))]))),128)),a("div",J,[o(e(b),{type:"button",variant:"outline",onClick:s[3]||(s[3]=l=>i.$inertia.visit("/cms/pages"))},{default:p(()=>[...s[8]||(s[8]=[c(" Cancel ",-1)])]),_:1}),o(e(b),{type:"submit",disabled:e(t).processing},{default:p(()=>[c(y(e(t).processing?"Saving...":r.page?.id?"Update Page":"Create Page"),1)]),_:1},8,["disabled"])])],32))}});export{te as _};
